{"repository_name":"hailo","body":"# 🔴 hailo.cr\n\n[![License GPL 3](https://img.shields.io/badge/license-GPL_3-green.svg)](https://github.com/hailo/hailo.cr/blob/master/COPYING)\n[![Travis CI](https://travis-ci.org/hailo/hailo.cr.svg?branch=master)](https://travis-ci.org/hailo/hailo.cr)\n\nHailo is a Markov chatterbot inspired by [MegaHAL](https://en.wikipedia.org/wiki/MegaHAL).\n\nIt is actually a port of the eponymous [Hailo Perl module](https://github.com/hailo/hailo).\n\nThe difference being that this one's written in [Crystal](https://crystal-lang.org/),\nconsists of less code, runs faster, and uses less memory. It also\ndrops support for multiple storage engines, sticking with SQLite only.\n\n## Differences from classic MegaHAL\n\n- Uses a space-efficient SQLite database to store the brain (saving 90%\n  of the space)\n- Quite fast at training against a large corpus\n- Includes a server daemon\n- Won't choke when the number of unique tokens passes the 64k mark ;)\n- Sophisticated parser and formatter\n  - Meaningfully tokenizes almost anything you'd encounter in a chatroom\n    (Unicode, URLs, dates & times, quotes, abbreviations etc)\n  - Intelligent handling of punctuation as prefix/postfix/infix tokens\n  - Special consideration of fully-capitalized and partially-capitalized\n    tokens rather than normalizing case and treating them identically\n  - Outputs clean, properly capitalized sentences\n\n## Installation\n\nFirst, install [Crystal](https://crystal-lang.org) along with\n`libsqlite3-dev` and `libreadline-dev`. Then do:\n\n```sh\ngit clone https://github.com/hailo/hailo.cr.git\ncd hailo.cr\nshards install\ncrystal build bin/hailo-cr.cr --release\n```\n\nThis gives you a `hailo-cr` binary that you can run.\n\n## Usage\n\nUse the command line interface (`hailo-cr`), or use Hailo in your code:\n\n```crystal\nrequire \"hailo\"\n\nhailo = Hailo.new(\"test.sqlite\")\nputs hailo.learn_and_reply(\"oh hi there\")\n```\n\nSee the [API documentation](https://hailo.github.io/hailo.cr/Hailo.html)\nfor more information.\n\n## Hacking\n\nRunning the tests is simple:\n\n```sh\ncrystal spec\n```\n\nIf you've saved a brain file with `hailo-cr --brain whatever.brain`, you can\neasily inspect it since it's just a SQLite file:\n\n```sh\nsqlite3 whatever.brain\nsqlite> .schema\nsqlite> select * from token limit 10;\n```\n\n## Support\n\nYou can ask a question in the [issue tracker](https://github.com/hailo/hailo.cr/issues),\nemail me at hinrik.sig@gmail.com, or hit me up on FreeNode (#hailo).\n\n## Contribute\n\nPull requests are welcome.\n\n## License\n\nhailo.cr is free software: you can redistribute it and/or modify it\nunder the terms of the GNU General Public License as published by the\nFree Software Foundation, either version 3 of the License, or (at your\noption) any later version.\n\nhailo.cr is distributed in the hope that it will be useful, but\nWITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\nPublic License for more details.\n\nSee [`COPYING`](https://github.com/hailo/hailo.cr/blob/master/COPYING)\nfor the complete license.\n","program":{"html_id":"hailo/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"hailo","program":true,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"hailo/Hailo","path":"Hailo.html","kind":"class","full_name":"Hailo","name":"Hailo","abstract":false,"superclass":{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"hailo/Hailo/Lists","kind":"module","full_name":"Hailo::Lists","name":"Lists"},{"html_id":"hailo/Hailo/Reply","kind":"module","full_name":"Hailo::Reply","name":"Reply"},{"html_id":"hailo/Hailo/Store","kind":"module","full_name":"Hailo::Store","name":"Store"},{"html_id":"hailo/Hailo/Learn","kind":"module","full_name":"Hailo::Learn","name":"Learn"},{"html_id":"hailo/Hailo/Progress","kind":"module","full_name":"Hailo::Progress","name":"Progress"},{"html_id":"hailo/Hailo/Parse","kind":"module","full_name":"Hailo::Parse","name":"Parse"},{"html_id":"hailo/Hailo/Markov","kind":"module","full_name":"Hailo::Markov","name":"Markov"},{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo.cr","line_number":1,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo.cr#L1"},{"filename":"src/hailo.cr","line_number":12,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo.cr#L12"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.1.0\"","doc":null,"summary":null}],"included_modules":[{"html_id":"hailo/Hailo/Learn","kind":"module","full_name":"Hailo::Learn","name":"Learn"},{"html_id":"hailo/Hailo/Lists","kind":"module","full_name":"Hailo::Lists","name":"Lists"},{"html_id":"hailo/Hailo/Markov","kind":"module","full_name":"Hailo::Markov","name":"Markov"},{"html_id":"hailo/Hailo/Parse","kind":"module","full_name":"Hailo::Parse","name":"Parse"},{"html_id":"hailo/Hailo/Reply","kind":"module","full_name":"Hailo::Reply","name":"Reply"},{"html_id":"hailo/Hailo/Store","kind":"module","full_name":"Hailo::Store","name":"Store"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(brain_file=nil,order=nil,debug=false,swap_tokens=DEFAULT_SWAP_TOKENS,ban_tokens=DEFAULT_BAN_TOKENS)-class-method","html_id":"new(brain_file=nil,order=nil,debug=false,swap_tokens=DEFAULT_SWAP_TOKENS,ban_tokens=DEFAULT_BAN_TOKENS)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"brain_file","doc":null,"default_value":"nil","external_name":"brain_file","restriction":""},{"name":"order","doc":null,"default_value":"nil","external_name":"order","restriction":""},{"name":"debug","doc":null,"default_value":"false","external_name":"debug","restriction":""},{"name":"swap_tokens","doc":null,"default_value":"DEFAULT_SWAP_TOKENS","external_name":"swap_tokens","restriction":""},{"name":"ban_tokens","doc":null,"default_value":"DEFAULT_BAN_TOKENS","external_name":"ban_tokens","restriction":""}],"args_string":"(brain_file = <span class=\"n\">nil</span>, order = <span class=\"n\">nil</span>, debug = <span class=\"n\">false</span>, swap_tokens = <span class=\"t\">DEFAULT_SWAP_TOKENS</span>, ban_tokens = <span class=\"t\">DEFAULT_BAN_TOKENS</span>)","args_html":"(brain_file = <span class=\"n\">nil</span>, order = <span class=\"n\">nil</span>, debug = <span class=\"n\">false</span>, swap_tokens = <span class=\"t\">DEFAULT_SWAP_TOKENS</span>, ban_tokens = <span class=\"t\">DEFAULT_BAN_TOKENS</span>)","location":{"filename":"src/hailo.cr","line_number":30,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo.cr#L30"},"def":{"name":"new","args":[{"name":"brain_file","doc":null,"default_value":"nil","external_name":"brain_file","restriction":""},{"name":"order","doc":null,"default_value":"nil","external_name":"order","restriction":""},{"name":"debug","doc":null,"default_value":"false","external_name":"debug","restriction":""},{"name":"swap_tokens","doc":null,"default_value":"DEFAULT_SWAP_TOKENS","external_name":"swap_tokens","restriction":""},{"name":"ban_tokens","doc":null,"default_value":"DEFAULT_BAN_TOKENS","external_name":"ban_tokens","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(brain_file, order, debug, swap_tokens, ban_tokens)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"learn_and_reply(message):String?-instance-method","html_id":"learn_and_reply(message):String?-instance-method","name":"learn_and_reply","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message) : String?","args_html":"(message) : String?","location":{"filename":"src/hailo.cr","line_number":39,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo.cr#L39"},"def":{"name":"learn_and_reply","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"learn(message)\nreply(message)\n"}}],"macros":[],"types":[{"html_id":"hailo/Hailo/CLI","path":"Hailo/CLI.html","kind":"module","full_name":"Hailo::CLI","name":"CLI","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo/cli.cr","line_number":6,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/cli.cr#L6"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"HAILO_REPLY","name":"HAILO_REPLY","value":"\"Hailo>\"","doc":null,"summary":null},{"id":"USER_PROMPT","name":"USER_PROMPT","value":"\"> \"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[{"id":"run:Nil-class-method","html_id":"run:Nil-class-method","name":"run","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Nil","args_html":" : Nil","location":{"filename":"src/hailo/cli.cr","line_number":18,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/cli.cr#L18"},"def":{"name":"run","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"parse_options\nhailo = Hailo.new(@@brain_file, @@order, @@debug)\nif train_file = @@train_file\n  hailo.train(train_file, progress: true)\nelse\n  if @@run_server\n    (Hailo::Server.new(hailo, @@bind, @@port)).run\n  else\n    while bytes = LibReadline.readline(prompt: USER_PROMPT)\n      line = String.new(bytes)\n      hailo.learn(line)\n      puts(\"#{HAILO_REPLY} #{hailo.reply(line)}\")\n    end\n    print(\"\\n\")\n  end\nend\n"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Expression","path":"Hailo/Expression.html","kind":"alias","full_name":"Hailo::Expression","name":"Expression","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo.cr","line_number":21,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo.cr#L21"}],"repository_name":"hailo","program":false,"enum":false,"alias":true,"aliased":"Array(Int32)","aliased_html":"Array(Int32)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Learn","path":"Hailo/Learn.html","kind":"module","full_name":"Hailo::Learn","name":"Learn","abstract":false,"superclass":null,"ancestors":[{"html_id":"hailo/Hailo/Progress","kind":"module","full_name":"Hailo::Progress","name":"Progress"}],"locations":[{"filename":"src/hailo/learn.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn.cr#L5"},{"filename":"src/hailo/learn/cache.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn/cache.cr#L5"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"hailo/Hailo/Progress","kind":"module","full_name":"Hailo::Progress","name":"Progress"}],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"}],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"learn(message):Nil-instance-method","html_id":"learn(message):Nil-instance-method","name":"learn","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"args_string":"(message) : Nil","args_html":"(message) : Nil","location":{"filename":"src/hailo/learn.cr","line_number":8,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn.cr#L8"},"def":{"name":"learn","args":[{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"tokens = make_tokens(message)\nif tokens.size < @order\n  return\nend\nwith_transaction do\n  token_ids = increase_token_occurrences(tokens)\n  process_markov_chain(token_ids, @order) do |prev_token_id, expr, next_token_id|\n    increase_link_counts(prev_token_id, expr, next_token_id)\n  end\n  message_count = get_info(\"message_count\")\n  new_count = message_count ? message_count.to_i32 + 1 : 1\n  add_info(\"message_count\", new_count)\nend\n"}},{"id":"train(train_file,progress=false):Nil-instance-method","html_id":"train(train_file,progress=false):Nil-instance-method","name":"train","doc":null,"summary":null,"abstract":false,"args":[{"name":"train_file","doc":null,"default_value":"","external_name":"train_file","restriction":""},{"name":"progress","doc":null,"default_value":"false","external_name":"progress","restriction":""}],"args_string":"(train_file, progress = <span class=\"n\">false</span>) : Nil","args_html":"(train_file, progress = <span class=\"n\">false</span>) : Nil","location":{"filename":"src/hailo/learn.cr","line_number":25,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn.cr#L25"},"def":{"name":"train","args":[{"name":"train_file","doc":null,"default_value":"","external_name":"train_file","restriction":""},{"name":"progress","doc":null,"default_value":"false","external_name":"progress","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"cache = Learn::Cache.new(@order)\nnr_lines = (File.read_lines(train_file)).size\nmessage_count = 0\nwith_progress(nr_lines, \"(1/3) Analyzing input text\", print: progress) do |update_progress|\n  File.each_line(train_file) do |line|\n    tokens = make_tokens(line)\n    if tokens.size >= @order\n      cache.learn_from_tokens(tokens)\n      message_count = message_count + 1\n    end\n    update_progress.call(1)\n  end\nend\nwith_bulk_transaction do\n  add_info(\"message_count\", message_count)\n  with_progress(cache.tokens.size, \"(2/3) Storing tokens\", print: progress) do |update_progress|\n    cache.tokens.each do |token, state|\n      add_token(state.id, token.text, token.spacing.value, state.occurrences)\n      update_progress.call(1)\n    end\n  end\n  with_progress(cache.exprs.size, \"(3/3) Storing expressions\", print: progress) do |update_progress|\n    cache.exprs.each do |expr, link_counts|\n      add_expr(expr, link_counts.to_msgpack)\n      update_progress.call(1)\n    end\n  end\nend\n"}}],"macros":[],"types":[{"html_id":"hailo/Hailo/Learn/Cache","path":"Hailo/Learn/Cache.html","kind":"class","full_name":"Hailo::Learn::Cache","name":"Cache","abstract":false,"superclass":{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"hailo/Hailo/Markov","kind":"module","full_name":"Hailo::Markov","name":"Markov"},{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/learn/cache.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn/cache.cr#L5"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"hailo/Hailo/Markov","kind":"module","full_name":"Hailo::Markov","name":"Markov"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Learn","kind":"module","full_name":"Hailo::Learn","name":"Learn"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(order)-class-method","html_id":"new(order)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"order","doc":null,"default_value":"","external_name":"order","restriction":""}],"args_string":"(order)","args_html":"(order)","location":{"filename":"src/hailo/learn/cache.cr","line_number":12,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn/cache.cr#L12"},"def":{"name":"new","args":[{"name":"order","doc":null,"default_value":"","external_name":"order","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(order)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"exprs:Hash(Array(Int32),Hash(Int32,{prev:Int32,next:Int32}))-instance-method","html_id":"exprs:Hash(Array(Int32),Hash(Int32,{prev:Int32,next:Int32}))-instance-method","name":"exprs","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(Array(Int32), Hash(Int32, {prev: Int32, next: Int32}))","args_html":" : Hash(Array(Int32), Hash(Int32, {prev: Int32, next: Int32}))","location":{"filename":"src/hailo/learn/cache.cr","line_number":9,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn/cache.cr#L9"},"def":{"name":"exprs","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@exprs"}},{"id":"learn_from_tokens(tokens):Nil-instance-method","html_id":"learn_from_tokens(tokens):Nil-instance-method","name":"learn_from_tokens","doc":null,"summary":null,"abstract":false,"args":[{"name":"tokens","doc":null,"default_value":"","external_name":"tokens","restriction":""}],"args_string":"(tokens) : Nil","args_html":"(tokens) : Nil","location":{"filename":"src/hailo/learn/cache.cr","line_number":15,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn/cache.cr#L15"},"def":{"name":"learn_from_tokens","args":[{"name":"tokens","doc":null,"default_value":"","external_name":"tokens","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"seen_tokens = Set(Token).new\ntoken_ids = tokens.map do |token|\n  __temp_25 = token\n  @tokens[__temp_25]? || (@tokens[__temp_25] = Token::State.new(@tokens.size + 1, 0))\n  if !(seen_tokens.includes?(token))\n    seen_tokens << token\n    @tokens[token] = Token::State.new(@tokens[token].id, @tokens[token].occurrences + 1)\n  end\n  @tokens[token].id\nend\nprocess_markov_chain(token_ids, @order) do |prev_token_id, expr, next_token_id|\n  link_counts = (  __temp_27 = expr\n  @exprs[__temp_27]? || (@exprs[__temp_27] = LinkCounts.new)\n)\n  prev_counts = (  __temp_29 = prev_token_id\n  link_counts[__temp_29]? || (link_counts[__temp_29] = {prev: 0, next: 0})\n)\n  link_counts[prev_token_id] = {prev: prev_counts[:prev] + 1, next: prev_counts[:next]}\n  next_counts = (  __temp_31 = next_token_id\n  link_counts[__temp_31]? || (link_counts[__temp_31] = {prev: 0, next: 0})\n)\n  link_counts[next_token_id] = {prev: next_counts[:prev], next: next_counts[:next] + 1}\nend\n"}},{"id":"tokens:Hash(Hailo::Token,Hailo::Token::State)-instance-method","html_id":"tokens:Hash(Hailo::Token,Hailo::Token::State)-instance-method","name":"tokens","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(Hailo::Token, Hailo::Token::State)","args_html":" : Hash(<a href=\"../../Hailo/Token.html\">Hailo::Token</a>, <a href=\"../../Hailo/Token/State.html\">Hailo::Token::State</a>)","location":{"filename":"src/hailo/learn/cache.cr","line_number":8,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/learn/cache.cr#L8"},"def":{"name":"tokens","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@tokens"}}],"macros":[],"types":[]}]},{"html_id":"hailo/Hailo/LinkCounts","path":"Hailo/LinkCounts.html","kind":"alias","full_name":"Hailo::LinkCounts","name":"LinkCounts","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo.cr","line_number":22,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo.cr#L22"}],"repository_name":"hailo","program":false,"enum":false,"alias":true,"aliased":"Hash(Int32, NamedTuple(prev: Int32, next: Int32))","aliased_html":"Hash(Int32, {prev: Int32, next: Int32})","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Lists","path":"Hailo/Lists.html","kind":"module","full_name":"Hailo::Lists","name":"Lists","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo/lists.cr","line_number":1,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/lists.cr#L1"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"DEFAULT_BAN_TOKENS","name":"DEFAULT_BAN_TOKENS","value":"Set {\"a\", \"ability\", \"able\", \"about\", \"absolute\", \"absolutely\", \"across\", \"actual\", \"actually\", \"after\", \"afternoon\", \"again\", \"against\", \"ago\", \"agree\", \"all\", \"almost\", \"along\", \"already\", \"although\", \"always\", \"am\", \"an\", \"and\", \"another\", \"any\", \"anyhow\", \"anything\", \"anyway\", \"are\", \"aren't\", \"around\", \"as\", \"at\", \"away\", \"back\", \"bad\", \"be\", \"been\", \"before\", \"behind\", \"being\", \"believe\", \"belong\", \"best\", \"better\", \"between\", \"big\", \"bigger\", \"biggest\", \"bit\", \"both\", \"buddy\", \"but\", \"by\", \"call\", \"called\", \"calling\", \"came\", \"can\", \"can't\", \"cannot\", \"care\", \"caring\", \"case\", \"catch\", \"caught\", \"certain\", \"certainly\", \"change\", \"close\", \"closer\", \"come\", \"coming\", \"common\", \"constant\", \"constantly\", \"could\", \"current\", \"day\", \"days\", \"derived\", \"describe\", \"describes\", \"determine\", \"determines\", \"did\", \"didn't\", \"do\", \"does\", \"doesn't\", \"doing\", \"don't\", \"done\", \"doubt\", \"down\", \"each\", \"earlier\", \"early\", \"else\", \"enjoy\", \"especially\", \"even\", \"ever\", \"every\", \"everybody\", \"everyone\", \"everything\", \"fact\", \"fair\", \"fairly\", \"far\", \"fellow\", \"few\", \"find\", \"fine\", \"for\", \"form\", \"found\", \"from\", \"full\", \"further\", \"gave\", \"get\", \"getting\", \"give\", \"given\", \"giving\", \"go\", \"going\", \"gone\", \"good\", \"got\", \"gotten\", \"great\", \"had\", \"has\", \"hasn't\", \"have\", \"haven't\", \"having\", \"held\", \"here\", \"high\", \"hold\", \"holding\", \"how\", \"if\", \"in\", \"indeed\", \"inside\", \"instead\", \"into\", \"is\", \"isn't\", \"it\", \"it's\", \"its\", \"just\", \"keep\", \"kind\", \"knew\", \"know\", \"known\", \"large\", \"larger\", \"largets\", \"last\", \"late\", \"later\", \"least\", \"less\", \"let\", \"let's\", \"level\", \"likes\", \"little\", \"long\", \"longer\", \"look\", \"looked\", \"looking\", \"looks\", \"low\", \"made\", \"make\", \"making\", \"many\", \"mate\", \"may\", \"maybe\", \"mean\", \"meet\", \"mention\", \"mere\", \"might\", \"moment\", \"more\", \"morning\", \"most\", \"move\", \"much\", \"must\", \"near\", \"nearer\", \"never\", \"next\", \"nice\", \"nobody\", \"none\", \"noon\", \"noone\", \"not\", \"note\", \"nothing\", \"now\", \"obvious\", \"of\", \"off\", \"on\", \"once\", \"only\", \"onto\", \"opinion\", \"or\", \"other\", \"our\", \"out\", \"over\", \"own\", \"part\", \"particular\", \"particularly\", \"perhaps\", \"person\", \"piece\", \"place\", \"pleasant\", \"please\", \"popular\", \"prefer\", \"pretty\", \"put\", \"quite\", \"real\", \"really\", \"receive\", \"received\", \"recent\", \"recently\", \"related\", \"result\", \"resulting\", \"results\", \"said\", \"same\", \"saw\", \"say\", \"saying\", \"see\", \"seem\", \"seemed\", \"seems\", \"seen\", \"seldom\", \"sense\", \"set\", \"several\", \"shall\", \"short\", \"shorter\", \"should\", \"show\", \"shows\", \"simple\", \"simply\", \"small\", \"so\", \"some\", \"someone\", \"something\", \"sometime\", \"sometimes\", \"somewhere\", \"sort\", \"sorts\", \"spend\", \"spent\", \"still\", \"stuff\", \"such\", \"suggest\", \"suggestion\", \"suppose\", \"sure\", \"surely\", \"surround\", \"surrounds\", \"take\", \"taken\", \"taking\", \"tell\", \"than\", \"thank\", \"thanks\", \"that\", \"that's\", \"thats\", \"the\", \"their\", \"them\", \"then\", \"there\", \"therefore\", \"these\", \"they\", \"thing\", \"things\", \"this\", \"those\", \"though\", \"thoughts\", \"thouroughly\", \"through\", \"tiny\", \"to\", \"today\", \"together\", \"told\", \"tomorrow\", \"too\", \"total\", \"totally\", \"touch\", \"try\", \"twice\", \"under\", \"understand\", \"understood\", \"until\", \"up\", \"us\", \"used\", \"using\", \"usually\", \"various\", \"very\", \"want\", \"wanted\", \"wants\", \"was\", \"watch\", \"way\", \"ways\", \"we\", \"we're\", \"well\", \"went\", \"were\", \"what\", \"what's\", \"whatever\", \"whats\", \"when\", \"where\", \"where's\", \"which\", \"while\", \"whilst\", \"who\", \"who's\", \"whom\", \"will\", \"wish\", \"with\", \"within\", \"wonder\", \"wonderful\", \"worse\", \"worst\", \"would\", \"wrong\", \"yesterday\", \"yet\"}","doc":null,"summary":null},{"id":"DEFAULT_SWAP_TOKENS","name":"DEFAULT_SWAP_TOKENS","value":"Hash {\"dislike\" => \"like\", \"hate\" => \"hate\", \"i\" => \"you\", \"i'd\" => \"you'd\", \"i'll\" => \"i'll\", \"i'm\" => \"you're\", \"i've\" => \"you've\", \"like\" => \"dislike\", \"me\" => \"you\", \"my\" => \"your\", \"mine\" => \"yours\", \"myself\" => \"yourself\", \"yes\" => \"no\", \"why\" => \"because\"}","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"}],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Markov","path":"Hailo/Markov.html","kind":"module","full_name":"Hailo::Markov","name":"Markov","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo/markov.cr","line_number":1,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/markov.cr#L1"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"BOUNDARY_TOKEN_ID","name":"BOUNDARY_TOKEN_ID","value":"0","doc":null,"summary":null},{"id":"DEFAULT_MARKOV_ORDER","name":"DEFAULT_MARKOV_ORDER","value":"2","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},{"html_id":"hailo/Hailo/Learn/Cache","kind":"class","full_name":"Hailo::Learn::Cache","name":"Cache"}],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Parse","path":"Hailo/Parse.html","kind":"module","full_name":"Hailo::Parse","name":"Parse","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo/parse.cr","line_number":4,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/parse.cr#L4"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"ABBREV","name":"ABBREV","value":"/#{ALPHABET}(?:\\.#{ALPHABET})++\\./","doc":null,"summary":null},{"id":"ADDRESS","name":"ADDRESS","value":"/:/","doc":null,"summary":null},{"id":"ALPHABET","name":"ALPHABET","value":"/(?:[\\p{L}\\p{M}])/","doc":null,"summary":null},{"id":"APOST_WORD","name":"APOST_WORD","value":"/#{ALPHABET}++(?:#{APOSTROPHE}#{ALPHABET}++)++/","doc":null,"summary":null},{"id":"APOSTROPHE","name":"APOSTROPHE","value":"/['’´]/","doc":null,"summary":null},{"id":"BARE_WORD","name":"BARE_WORD","value":"/#{WORD_CHAR}++/","doc":null,"summary":null},{"id":"BOUNDARY","name":"BOUNDARY","value":"/#{CLOSE_QUOTE}?(?:\\s*#{TERMINATOR}|#{ADDRESS})\\s+#{OPEN_QUOTE}?\\s*/","doc":null,"summary":null},{"id":"CLOSE_QUOTE","name":"CLOSE_QUOTE","value":"/['\"’“”«»」』›‘]/","doc":null,"summary":null},{"id":"CLOSE_TAG","name":"CLOSE_TAG","value":"/<\\/(?:-|#{WORD_CHAR})+>/","doc":null,"summary":null},{"id":"CURRENCY","name":"CURRENCY","value":"/[¤¥¢£\\$]/","doc":null,"summary":null},{"id":"DASH","name":"DASH","value":"/[–-]/","doc":null,"summary":null},{"id":"DATE","name":"DATE","value":"/[0-9]{4}-[Ww]?[0-9]{1,2}-[0-9]{1,2}/","doc":null,"summary":null},{"id":"DATETIME","name":"DATETIME","value":"/#{DATE}[Tt]#{TIME}/","doc":null,"summary":null},{"id":"DOTTED","name":"DOTTED","value":"/#{BARE_WORD}?\\.#{BARE_WORD}(?:\\.#{BARE_WORD})*+/","doc":null,"summary":null},{"id":"DOTTED_STRICT","name":"DOTTED_STRICT","value":"/#{LOOSE_WORD}(?:#{POINT}(?:\\d+|#{WORD_CHAR}{2,}))?/","doc":null,"summary":null},{"id":"ELLIPSIS","name":"ELLIPSIS","value":"/(?:\\.{2,}|…)/","doc":null,"summary":null},{"id":"EMAIL","name":"EMAIL","value":"/[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+(?:\\.[A-Za-z]{2,4})*/","doc":null,"summary":null},{"id":"ESC_SPACE","name":"ESC_SPACE","value":"/(?:\\\\ )+/","doc":null,"summary":null},{"id":"FILENAME","name":"FILENAME","value":"/(?:#{NAME})?\\.#{NAME}(?:\\.#{NAME})*|#{NAME}/","doc":null,"summary":null},{"id":"HOST_WORD","name":"HOST_WORD","value":"/#{BARE_WORD}(?:-+#{BARE_WORD})*/","doc":null,"summary":null},{"id":"HOSTNAME","name":"HOSTNAME","value":"/#{HOST_WORD}(?:\\.#{HOST_WORD})*/","doc":null,"summary":null},{"id":"IPV4","name":"IPV4","value":"/[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/","doc":null,"summary":null},{"id":"IPV6","name":"IPV6","value":"/(?:(?:[0-9A-Fa-f]{0,4})?:){1,7}[0-9A-Fa-f]{0,4}/","doc":null,"summary":null},{"id":"IRC_CHAN","name":"IRC_CHAN","value":"/[#&+][^ \\a\\0\\012\\015,:]{1,199}/","doc":null,"summary":null},{"id":"IRC_NICK","name":"IRC_NICK","value":"/<(?: |[&~]?[@%+~&])?[A-Za-z_`\\-^\\|\\\\\\{\\}\\[\\]][A-Za-z_0-9`\\-^\\|\\\\\\{}\\[\\]]+>/","doc":null,"summary":null},{"id":"LOOSE_WORD","name":"LOOSE_WORD","value":"/#{IRC_CHAN}|#{DATETIME}|#{DATE}|#{TIME}|#{PATH}|#{NUMBER}|#{ABBREV}|#{APOST_WORD}|#{NUMERO}|#{BARE_WORD}(?:#{DASH}(?:#{WORD_TYPES}|#{BARE_WORD})|#{APOSTROPHE}(?!#{ALPHABET}|#{NUMBER}|#{APOSTROPHE})|#{DASH}(?!#{DASH}{2}))*/","doc":null,"summary":null},{"id":"NAME","name":"NAME","value":"/(?:#{BARE_WORD}|#{ESC_SPACE})+/","doc":null,"summary":null},{"id":"NON_WORD","name":"NON_WORD","value":"/#{NWORD_CHAR}++/","doc":null,"summary":null},{"id":"NONSPACE","name":"NONSPACE","value":"/\\S/","doc":null,"summary":null},{"id":"NUMBER","name":"NUMBER","value":"/#{CURRENCY}?+#{POINT}\\d++(?:#{POINT}\\d++)*+(?:#{CURRENCY}|#{ALPHABET}++)?+|#{CURRENCY}?+\\d++(?:#{POINT}\\d++)*+(?:#{CURRENCY}|#{ALPHABET}++)?+(?!\\d|#{ALPHABET})/","doc":null,"summary":null},{"id":"NUMERO","name":"NUMERO","value":"/#[0-9]+/","doc":null,"summary":null},{"id":"NWORD_CHAR","name":"NWORD_CHAR","value":"/[^\\s\\p{L}\\p{M}\\d_]/","doc":null,"summary":null},{"id":"OPEN_QUOTE","name":"OPEN_QUOTE","value":"/['\"‘“„«»「『‹‚]/","doc":null,"summary":null},{"id":"OPT_LONG","name":"OPT_LONG","value":"/--#{OPT_PART}(?:-#{OPT_PART})*/","doc":null,"summary":null},{"id":"OPT_PART","name":"OPT_PART","value":"/(?:#{ALPHABET}|\\d)(?:#{ALPHABET}|[_\\d])+/","doc":null,"summary":null},{"id":"OPT_SHORT","name":"OPT_SHORT","value":"/-(?:#{ALPHABET}|\\d)(?!#{ALPHABET}|\\d)/","doc":null,"summary":null},{"id":"PAREN_TIME","name":"PAREN_TIME","value":"/\\(#{TIME}\\)/","doc":null,"summary":null},{"id":"PATH","name":"PATH","value":"/#{UNIX_PATH}|#{WIN_PATH}/","doc":null,"summary":null},{"id":"PERL_CLASS","name":"PERL_CLASS","value":"/(?:::\\w+(?:::\\w+)*|\\w+(?:::\\w+)+)(?:::)?|\\w+::/","doc":null,"summary":null},{"id":"POINT","name":"POINT","value":"/[.,]/","doc":null,"summary":null},{"id":"PORT","name":"PORT","value":"/:[0-9]+/","doc":null,"summary":null},{"id":"PUNCTUATION","name":"PUNCTUATION","value":"/[?!‽,;.:]/","doc":null,"summary":null},{"id":"RX_APOST","name":"RX_APOST","value":"{\"'\" => /[’´](?!#{ALPHABET}|#{NUMBER})/, \"’\" => /['´](?!#{ALPHABET}|#{NUMBER})/, \"´\" => /['’](?!#{ALPHABET}|#{NUMBER})/}","doc":null,"summary":null},{"id":"RX_APOSTROPHE","name":"RX_APOSTROPHE","value":"/#{APOSTROPHE}/","doc":null,"summary":null},{"id":"RX_CAPITALIZE_FIRST","name":"RX_CAPITALIZE_FIRST","value":"/^\\s*#{OPEN_QUOTE}?\\s*\\K#{SPLIT_WORD}(?=#{ELLIPSIS}|(?:(?:#{CLOSE_QUOTE}|#{TERMINATOR}|#{ADDRESS}|#{PUNCTUATION}+)?(?:\\s|$)))/","doc":null,"summary":null},{"id":"RX_CAPITALIZE_IM","name":"RX_CAPITALIZE_IM","value":"/(?:(?:#{ELLIPSIS}|\\s+)|#{OPEN_QUOTE})\\Ki(?=#{APOSTROPHE}#{ALPHABET}|\\s|#{PUNCTUATION}|$)/","doc":null,"summary":null},{"id":"RX_CAPITALIZE_REST_A","name":"RX_CAPITALIZE_REST_A","value":"/(?:#{ELLIPSIS}|\\s+)#{OPEN_QUOTE}?\\s*#{WORD_STRICT}#{BOUNDARY}\\K#{SPLIT_WORD}/","doc":null,"summary":null},{"id":"RX_CAPITALIZE_REST_B","name":"RX_CAPITALIZE_REST_B","value":"/#{SEPARATOR}#{WORD_STRICT}#{SEPARATOR}#{BOUNDARY}\\K#{SPLIT_WORD}/","doc":null,"summary":null},{"id":"RX_CAPITALIZE_SECOND","name":"RX_CAPITALIZE_SECOND","value":"/^#{SPLIT_WORD}(?:\\s*#{TERMINATOR}|#{ADDRESS})\\s+\\K#{SPLIT_WORD}/","doc":null,"summary":null},{"id":"RX_DASH_NEWL","name":"RX_DASH_NEWL","value":"/(#{DASH})\\s*\\n+\\s*/","doc":null,"summary":null},{"id":"RX_END_PARAGRAPH","name":"RX_END_PARAGRAPH","value":"/(?:#{ELLIPSIS}|\\s+|^)#{OPEN_QUOTE}?(?:#{SPLIT_WORD}(?:\\.#{SPLIT_WORD})*)\\K(#{CLOSE_QUOTE}?)$/","doc":null,"summary":null},{"id":"RX_MIXED_CASE","name":"RX_MIXED_CASE","value":"/\\p{Ll}+\\p{Lu}|\\p{Lu}{2,}\\p{Ll}|(?:\\p{Lu}+#{NWORD_CHAR}+)(?<!I')(?:\\p{Lu}*\\p{Ll})/","doc":null,"summary":null},{"id":"RX_NEWLINE","name":"RX_NEWLINE","value":"/\\s*\\n+\\s*/","doc":null,"summary":null},{"id":"RX_NON_SPACE","name":"RX_NON_SPACE","value":"/\\S+/","doc":null,"summary":null},{"id":"RX_SPACE","name":"RX_SPACE","value":"/\\s+/","doc":null,"summary":null},{"id":"RX_TOKEN_NORMAL","name":"RX_TOKEN_NORMAL","value":"/(?P<word>#{WORD})|(?P<non_word>#{NON_WORD})/","doc":null,"summary":null},{"id":"RX_TOKEN_SPECIAL","name":"RX_TOKEN_SPECIAL","value":"/(?P<special>#{SPECIAL_WORD})|#{RX_TOKEN_NORMAL}/","doc":null,"summary":null},{"id":"RX_WORD_APOST","name":"RX_WORD_APOST","value":"/#{APOSTROPHE}(?!#{ALPHABET}|#{NUMBER})/","doc":null,"summary":null},{"id":"SEPARATOR","name":"SEPARATOR","value":"\"\\b\"","doc":null,"summary":null},{"id":"SPACE","name":"SPACE","value":"/\\s/","doc":null,"summary":null},{"id":"SPECIAL_WORD","name":"SPECIAL_WORD","value":"/(?>#{URI}|#{OPT_SHORT}|#{OPT_LONG}|#{CLOSE_TAG}|#{IRC_NICK}|#{IRC_CHAN}|#{DATETIME}|#{DATE}|#{TIME}|#{PAREN_TIME}|#{SQUARE_TIME}|#{PERL_CLASS}|#{EMAIL}|#{TWAT_NAME}|#{PATH}|#{NUMERO})/","doc":null,"summary":null},{"id":"SPLIT_WORD","name":"SPLIT_WORD","value":"/#{LOOSE_WORD}(?:\\/#{LOOSE_WORD})?(?=#{PUNCTUATION}(?:\\s+|$)|#{CLOSE_QUOTE}|#{TERMINATOR}|\\s+|$)/","doc":null,"summary":null},{"id":"SQUARE_TIME","name":"SQUARE_TIME","value":"/\\[#{TIME}\\]/","doc":null,"summary":null},{"id":"TERMINATOR","name":"TERMINATOR","value":"/[?!‽]+|(?<!\\.)\\./","doc":null,"summary":null},{"id":"TIME","name":"TIME","value":"/[0-9]{1,2}:[0-9]{2}(?::[0-9]{2})?(?:[Zz]| ?(?:am|AM|pm|PM)|[-+±][0-9]{2}(?::?[0-9]{2})?)?/","doc":null,"summary":null},{"id":"TWAT_NAME","name":"TWAT_NAME","value":"/@[A-Za-z0-9_]+/","doc":null,"summary":null},{"id":"UNIX_PATH","name":"UNIX_PATH","value":"/\\/#{FILENAME}(?:\\/#{FILENAME})*\\/?/","doc":null,"summary":null},{"id":"URI","name":"URI","value":"/#{URI_SCHEME}(?:#{HOSTNAME}|#{IPV4}|#{IPV6})#{PORT}?#{URI_PATH}?/","doc":null,"summary":null},{"id":"URI_EXTRA1","name":"URI_EXTRA1","value":"/[-\\d%_.~$!#&'()*+,\\/:;=?@\\[\\]]/","doc":null,"summary":null},{"id":"URI_EXTRA2","name":"URI_EXTRA2","value":"/[-\\d%_~$!#&'()*+,\\/:;=?@\\[\\]]/","doc":null,"summary":null},{"id":"URI_PATH","name":"URI_PATH","value":"/\\/(?:(?:#{ALPHABET}+|#{URI_EXTRA1}+)*(?:#{ALPHABET}+|#{URI_EXTRA2}+))?/","doc":null,"summary":null},{"id":"URI_SCHEME","name":"URI_SCHEME","value":"/(?:#{HOST_WORD}\\+)?#{BARE_WORD}:\\/\\//","doc":null,"summary":null},{"id":"WIN_PATH","name":"WIN_PATH","value":"/#{ALPHABET}:\\\\#{FILENAME}(?:\\\\#{FILENAME})*\\\\?/","doc":null,"summary":null},{"id":"WORD","name":"WORD","value":"/#{WORD_TYPES}(?:(?:#{DASH}#{WORD_TYPES})++|#{DASH}(?!#{DASH}))?+/","doc":null,"summary":null},{"id":"WORD_CHAR","name":"WORD_CHAR","value":"/#{ALPHABET}|[\\d_]/","doc":null,"summary":null},{"id":"WORD_STRICT","name":"WORD_STRICT","value":"/#{DOTTED_STRICT}(?:#{APOSTROPHE}#{DOTTED_STRICT})*/","doc":null,"summary":null},{"id":"WORD_TYPES","name":"WORD_TYPES","value":"/#{NUMBER}|#{ABBREV}|#{DOTTED}|#{APOST_WORD}|#{BARE_WORD}/","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"}],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Progress","path":"Hailo/Progress.html","kind":"module","full_name":"Hailo::Progress","name":"Progress","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo/progress.cr","line_number":3,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/progress.cr#L3"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"hailo/Hailo/Learn","kind":"module","full_name":"Hailo::Learn","name":"Learn"}],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Reply","path":"Hailo/Reply.html","kind":"module","full_name":"Hailo::Reply","name":"Reply","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo/reply.cr","line_number":4,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/reply.cr#L4"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"}],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"reply(message=nil):String?-instance-method","html_id":"reply(message=nil):String?-instance-method","name":"reply","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>) : String?","args_html":"(message = <span class=\"n\">nil</span>) : String?","location":{"filename":"src/hailo/reply.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/reply.cr#L5"},"def":{"name":"reply","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if message\n  input_tokens = make_tokens(message)\n  reply_tokens = choose_reply(input_tokens)\nelse\n  reply_tokens = choose_reply\nend\nif !reply_tokens\n  return\nend\nmake_output(reply_tokens)\n"}}],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Server","path":"Hailo/Server.html","kind":"class","full_name":"Hailo::Server","name":"Server","abstract":false,"superclass":{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/server.cr","line_number":4,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L4"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(hailo,host,port)-class-method","html_id":"new(hailo,host,port)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"hailo","doc":null,"default_value":"","external_name":"hailo","restriction":""},{"name":"host","doc":null,"default_value":"","external_name":"host","restriction":""},{"name":"port","doc":null,"default_value":"","external_name":"port","restriction":""}],"args_string":"(hailo, host, port)","args_html":"(hailo, host, port)","location":{"filename":"src/hailo/server.cr","line_number":32,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L32"},"def":{"name":"new","args":[{"name":"hailo","doc":null,"default_value":"","external_name":"hailo","restriction":""},{"name":"host","doc":null,"default_value":"","external_name":"host","restriction":""},{"name":"port","doc":null,"default_value":"","external_name":"port","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(hailo, host, port)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"run:Nil-instance-method","html_id":"run:Nil-instance-method","name":"run","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Nil","args_html":" : Nil","location":{"filename":"src/hailo/server.cr","line_number":35,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L35"},"def":{"name":"run","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"server = HTTP::Server.new do |context|\n  begin\n    context.response.content_type = \"application/json\"\n    json = context.request.body\n    if !json\n      context.response.status_code = 400\n      context.response.output << Response.new(error: \"Missing JSON body\").to_json\n      next\n    end\n    reply = nil\n    case context.request.path\n    when \"/learn\"\n      request = LearnRequest.from_json(json)\n      @hailo.learn(request.input)\n    when \"/learn_and_reply\"\n      request = LearnAndReplyRequest.from_json(json)\n      reply = @hailo.learn_and_reply(request.input)\n    when \"/reply\"\n      request = ReplyRequest.from_json(json)\n      reply = @hailo.reply(request.input)\n    else\n      context.response.status_code = 404\n      context.response.output << Response.new(error: \"Unsupported endpoint\").to_json\n      next\n    end\n    context.response.status_code = 200\n    response = Response.new(reply: reply)\n    context.response.output << response.to_json\n    p(request)\n    p(response)\n  rescue ex\n    p(ex)\n    context.response.status_code = 500\n    context.response.output << Response.new(error: \"Internal server error\").to_json\n  end\nend\nserver.bind_tcp(@host, @port)\nputs(\"Hailo is listening for JSON POST requests, e.g.:\")\nputs(\"  curl #{@host}:#{@port}/reply -H \\\"Content-Type: application/json\\\" -d '{\\\"input\\\": \\\"oh hi there\\\"}'\")\nserver.listen\n"}}],"macros":[],"types":[{"html_id":"hailo/Hailo/Server/LearnAndReplyRequest","path":"Hailo/Server/LearnAndReplyRequest.html","kind":"class","full_name":"Hailo::Server::LearnAndReplyRequest","name":"LearnAndReplyRequest","abstract":false,"superclass":{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/server.cr","line_number":10,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L10"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Server","kind":"class","full_name":"Hailo::Server","name":"Server"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/hailo/server.cr","line_number":11,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L11"},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"input:String-instance-method","html_id":"input:String-instance-method","name":"input","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/hailo/server.cr","line_number":12,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L12"},"def":{"name":"input","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@input"}},{"id":"input=(input:String)-instance-method","html_id":"input=(input:String)-instance-method","name":"input=","doc":null,"summary":null,"abstract":false,"args":[{"name":"input","doc":null,"default_value":"","external_name":"input","restriction":"String"}],"args_string":"(input : String)","args_html":"(input : String)","location":{"filename":"src/hailo/server.cr","line_number":12,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L12"},"def":{"name":"input=","args":[{"name":"input","doc":null,"default_value":"","external_name":"input","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@input = input"}}],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Server/LearnRequest","path":"Hailo/Server/LearnRequest.html","kind":"class","full_name":"Hailo::Server::LearnRequest","name":"LearnRequest","abstract":false,"superclass":{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/server.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L5"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Server","kind":"class","full_name":"Hailo::Server","name":"Server"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/hailo/server.cr","line_number":6,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L6"},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"input:String-instance-method","html_id":"input:String-instance-method","name":"input","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/hailo/server.cr","line_number":7,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L7"},"def":{"name":"input","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@input"}},{"id":"input=(input:String)-instance-method","html_id":"input=(input:String)-instance-method","name":"input=","doc":null,"summary":null,"abstract":false,"args":[{"name":"input","doc":null,"default_value":"","external_name":"input","restriction":"String"}],"args_string":"(input : String)","args_html":"(input : String)","location":{"filename":"src/hailo/server.cr","line_number":7,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L7"},"def":{"name":"input=","args":[{"name":"input","doc":null,"default_value":"","external_name":"input","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@input = input"}}],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Server/ReplyRequest","path":"Hailo/Server/ReplyRequest.html","kind":"class","full_name":"Hailo::Server::ReplyRequest","name":"ReplyRequest","abstract":false,"superclass":{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/server.cr","line_number":15,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L15"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Server","kind":"class","full_name":"Hailo::Server","name":"Server"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/hailo/server.cr","line_number":16,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L16"},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"input:String?-instance-method","html_id":"input:String?-instance-method","name":"input","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/hailo/server.cr","line_number":17,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L17"},"def":{"name":"input","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@input"}},{"id":"input=(input:String?)-instance-method","html_id":"input=(input:String?)-instance-method","name":"input=","doc":null,"summary":null,"abstract":false,"args":[{"name":"input","doc":null,"default_value":"","external_name":"input","restriction":"String | ::Nil"}],"args_string":"(input : String?)","args_html":"(input : String?)","location":{"filename":"src/hailo/server.cr","line_number":17,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L17"},"def":{"name":"input=","args":[{"name":"input","doc":null,"default_value":"","external_name":"input","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@input = input"}}],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Server/Response","path":"Hailo/Server/Response.html","kind":"class","full_name":"Hailo::Server::Response","name":"Response","abstract":false,"superclass":{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"hailo/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/server.cr","line_number":20,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L20"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"hailo/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Server","kind":"class","full_name":"Hailo::Server","name":"Server"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/hailo/server.cr","line_number":21,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L21"},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"id":"new(reply=nil,error=nil)-class-method","html_id":"new(reply=nil,error=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"reply","doc":null,"default_value":"nil","external_name":"reply","restriction":""},{"name":"error","doc":null,"default_value":"nil","external_name":"error","restriction":""}],"args_string":"(reply = <span class=\"n\">nil</span>, error = <span class=\"n\">nil</span>)","args_html":"(reply = <span class=\"n\">nil</span>, error = <span class=\"n\">nil</span>)","location":{"filename":"src/hailo/server.cr","line_number":25,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L25"},"def":{"name":"new","args":[{"name":"reply","doc":null,"default_value":"nil","external_name":"reply","restriction":""},{"name":"error","doc":null,"default_value":"nil","external_name":"error","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(reply, error)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"error:String?-instance-method","html_id":"error:String?-instance-method","name":"error","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/hailo/server.cr","line_number":23,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L23"},"def":{"name":"error","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@error"}},{"id":"error=(error:String?)-instance-method","html_id":"error=(error:String?)-instance-method","name":"error=","doc":null,"summary":null,"abstract":false,"args":[{"name":"error","doc":null,"default_value":"","external_name":"error","restriction":"String | ::Nil"}],"args_string":"(error : String?)","args_html":"(error : String?)","location":{"filename":"src/hailo/server.cr","line_number":23,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L23"},"def":{"name":"error=","args":[{"name":"error","doc":null,"default_value":"","external_name":"error","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@error = error"}},{"id":"reply:String?-instance-method","html_id":"reply:String?-instance-method","name":"reply","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/hailo/server.cr","line_number":22,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L22"},"def":{"name":"reply","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@reply"}},{"id":"reply=(reply:String?)-instance-method","html_id":"reply=(reply:String?)-instance-method","name":"reply=","doc":null,"summary":null,"abstract":false,"args":[{"name":"reply","doc":null,"default_value":"","external_name":"reply","restriction":"String | ::Nil"}],"args_string":"(reply : String?)","args_html":"(reply : String?)","location":{"filename":"src/hailo/server.cr","line_number":22,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/server.cr#L22"},"def":{"name":"reply=","args":[{"name":"reply","doc":null,"default_value":"","external_name":"reply","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@reply = reply"}}],"macros":[],"types":[]}]},{"html_id":"hailo/Hailo/Store","path":"Hailo/Store.html","kind":"module","full_name":"Hailo::Store","name":"Store","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo/store.cr","line_number":7,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/store.cr#L7"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"}],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Token","path":"Hailo/Token.html","kind":"struct","full_name":"Hailo::Token","name":"Token","abstract":false,"superclass":{"html_id":"hailo/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"hailo/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"hailo/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/token.cr","line_number":1,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L1"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(text,spacing=Spacing::Normal)-class-method","html_id":"new(text,spacing=Spacing::Normal)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"text","doc":null,"default_value":"","external_name":"text","restriction":""},{"name":"spacing","doc":null,"default_value":"Spacing::Normal","external_name":"spacing","restriction":""}],"args_string":"(text, spacing = <span class=\"t\">Spacing</span><span class=\"t\">::</span><span class=\"t\">Normal</span>)","args_html":"(text, spacing = <span class=\"t\">Spacing</span><span class=\"t\">::</span><span class=\"t\">Normal</span>)","location":{"filename":"src/hailo/token.cr","line_number":12,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L12"},"def":{"name":"new","args":[{"name":"text","doc":null,"default_value":"","external_name":"text","restriction":""},{"name":"spacing","doc":null,"default_value":"Spacing::Normal","external_name":"spacing","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(text, spacing)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"inspect(io):Nil-instance-method","html_id":"inspect(io):Nil-instance-method","name":"inspect","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io) : Nil","args_html":"(io) : Nil","location":{"filename":"src/hailo/token.cr","line_number":21,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L21"},"def":{"name":"inspect","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"if !spacing.normal?\n  io << spacing\n  io << \"|\"\nend\nio << text\n"}},{"id":"similar_tokens:Array(Token)-instance-method","html_id":"similar_tokens:Array(Token)-instance-method","name":"similar_tokens","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Token)","args_html":" : Array(<a href=\"../Hailo/Token.html\">Token</a>)","location":{"filename":"src/hailo/token.cr","line_number":15,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L15"},"def":{"name":"similar_tokens","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Token)","visibility":"Public","body":"(Spacing.values - [spacing]).map do |other_spacing|\n  Token.new(text, other_spacing)\nend"}},{"id":"spacing:Spacing-instance-method","html_id":"spacing:Spacing-instance-method","name":"spacing","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Spacing","args_html":" : <a href=\"../Hailo/Token/Spacing.html\">Spacing</a>","location":{"filename":"src/hailo/token.cr","line_number":10,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L10"},"def":{"name":"spacing","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Spacing","visibility":"Public","body":"@spacing"}},{"id":"text:String-instance-method","html_id":"text:String-instance-method","name":"text","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/hailo/token.cr","line_number":9,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L9"},"def":{"name":"text","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@text"}}],"macros":[],"types":[{"html_id":"hailo/Hailo/Token/Probability","path":"Hailo/Token/Probability.html","kind":"struct","full_name":"Hailo::Token::Probability","name":"Probability","abstract":false,"superclass":{"html_id":"hailo/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"hailo/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"hailo/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/token/probability.cr","line_number":1,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/probability.cr#L1"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Token","kind":"struct","full_name":"Hailo::Token","name":"Token"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(token_id,p)-class-method","html_id":"new(token_id,p)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"token_id","doc":null,"default_value":"","external_name":"token_id","restriction":""},{"name":"p","doc":null,"default_value":"","external_name":"p","restriction":""}],"args_string":"(token_id, p)","args_html":"(token_id, p)","location":{"filename":"src/hailo/token/probability.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/probability.cr#L5"},"def":{"name":"new","args":[{"name":"token_id","doc":null,"default_value":"","external_name":"token_id","restriction":""},{"name":"p","doc":null,"default_value":"","external_name":"p","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(token_id, p)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"inspect(io):Nil-instance-method","html_id":"inspect(io):Nil-instance-method","name":"inspect","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io) : Nil","args_html":"(io) : Nil","location":{"filename":"src/hailo/token/probability.cr","line_number":8,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/probability.cr#L8"},"def":{"name":"inspect","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"io << (sprintf(\"%d => %.2f%%\", @token_id, @p * 100))"}},{"id":"p:Float64-instance-method","html_id":"p:Float64-instance-method","name":"p","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Float64","args_html":" : Float64","location":{"filename":"src/hailo/token/probability.cr","line_number":3,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/probability.cr#L3"},"def":{"name":"p","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Float64","visibility":"Public","body":"@p"}},{"id":"token_id:TokenId-instance-method","html_id":"token_id:TokenId-instance-method","name":"token_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : TokenId","args_html":" : <a href=\"../../Hailo/TokenId.html\">TokenId</a>","location":{"filename":"src/hailo/token/probability.cr","line_number":2,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/probability.cr#L2"},"def":{"name":"token_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"TokenId","visibility":"Public","body":"@token_id"}}],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Token/Spacing","path":"Hailo/Token/Spacing.html","kind":"enum","full_name":"Hailo::Token::Spacing","name":"Spacing","abstract":false,"superclass":null,"ancestors":[{"html_id":"hailo/Enum","kind":"struct","full_name":"Enum","name":"Enum"},{"html_id":"hailo/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"hailo/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/token.cr","line_number":2,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L2"}],"repository_name":"hailo","program":false,"enum":true,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[{"id":"Normal","name":"Normal","value":"0","doc":null,"summary":null},{"id":"Prefix","name":"Prefix","value":"1","doc":null,"summary":null},{"id":"Postfix","name":"Postfix","value":"2","doc":null,"summary":null},{"id":"Infix","name":"Infix","value":"3","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Token","kind":"struct","full_name":"Hailo::Token","name":"Token"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"infix?-instance-method","html_id":"infix?-instance-method","name":"infix?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/hailo/token.cr","line_number":6,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L6"},"def":{"name":"infix?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self == Infix"}},{"id":"normal?-instance-method","html_id":"normal?-instance-method","name":"normal?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/hailo/token.cr","line_number":3,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L3"},"def":{"name":"normal?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self == Normal"}},{"id":"postfix?-instance-method","html_id":"postfix?-instance-method","name":"postfix?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/hailo/token.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L5"},"def":{"name":"postfix?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self == Postfix"}},{"id":"prefix?-instance-method","html_id":"prefix?-instance-method","name":"prefix?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/hailo/token.cr","line_number":4,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token.cr#L4"},"def":{"name":"prefix?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self == Prefix"}}],"macros":[],"types":[]},{"html_id":"hailo/Hailo/Token/State","path":"Hailo/Token/State.html","kind":"struct","full_name":"Hailo::Token::State","name":"State","abstract":false,"superclass":{"html_id":"hailo/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"hailo/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"hailo/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"hailo/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/hailo/token/state.cr","line_number":1,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/state.cr#L1"}],"repository_name":"hailo","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo/Token","kind":"struct","full_name":"Hailo::Token","name":"Token"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(id,occurrences)-class-method","html_id":"new(id,occurrences)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"occurrences","doc":null,"default_value":"","external_name":"occurrences","restriction":""}],"args_string":"(id, occurrences)","args_html":"(id, occurrences)","location":{"filename":"src/hailo/token/state.cr","line_number":5,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/state.cr#L5"},"def":{"name":"new","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":""},{"name":"occurrences","doc":null,"default_value":"","external_name":"occurrences","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(id, occurrences)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"id:TokenId-instance-method","html_id":"id:TokenId-instance-method","name":"id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : TokenId","args_html":" : <a href=\"../../Hailo/TokenId.html\">TokenId</a>","location":{"filename":"src/hailo/token/state.cr","line_number":2,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/state.cr#L2"},"def":{"name":"id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"TokenId","visibility":"Public","body":"@id"}},{"id":"inspect(io):Nil-instance-method","html_id":"inspect(io):Nil-instance-method","name":"inspect","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"args_string":"(io) : Nil","args_html":"(io) : Nil","location":{"filename":"src/hailo/token/state.cr","line_number":8,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/state.cr#L8"},"def":{"name":"inspect","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Nil","visibility":"Public","body":"io << (sprintf(\"%d x %d\", @id, @occurences))"}},{"id":"occurrences:Int32-instance-method","html_id":"occurrences:Int32-instance-method","name":"occurrences","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","args_html":" : Int32","location":{"filename":"src/hailo/token/state.cr","line_number":3,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo/token/state.cr#L3"},"def":{"name":"occurrences","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@occurrences"}}],"macros":[],"types":[]}]},{"html_id":"hailo/Hailo/TokenId","path":"Hailo/TokenId.html","kind":"alias","full_name":"Hailo::TokenId","name":"TokenId","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"src/hailo.cr","line_number":20,"url":"https://github.com/hailo/hailo.cr/blob/b2d2ad0f38af505ff33076560f58494e9c07f446/src/hailo.cr#L20"}],"repository_name":"hailo","program":false,"enum":false,"alias":true,"aliased":"Int32","aliased_html":"Int32","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"hailo/Hailo","kind":"class","full_name":"Hailo","name":"Hailo"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}]}}